/*! ovh-angular-slider - 0.2.3 - 2018-08-03 */
angular.module("ovh-angular-slider",[]),angular.module("ovh-angular-slider").directive("ovhSlider",["$timeout",function(a){"use strict";var b=function(a){return angular.element(a)},c=function(a){return""+a+"px"},d=function(a,b){return a.css({left:b})},e=function(a){return a[0].offsetWidth/2},f=function(a){return a[0].offsetLeft},g=function(a){return a[0].offsetWidth},h=function(a){return isNaN(a)?a:Math.min(Math.max(0,a),100)},i=function(a,b,c,d){var e,f,g,h;return d||(d=0),c||(c=1/Math.pow(10,b)),f=(a-d)%c,h=f>c/2?a+c-f:a-f,e=Math.pow(10,b),g=h*e/e,parseFloat(g.toFixed(b))},j={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend"}};return{restrict:"E",scope:{floor:"@",ceiling:"@",values:"=?",step:"@",highlight:"@",precision:"@",buffer:"@",dragstop:"@",ngModel:"=?",ngModelLow:"=?",ngModelHigh:"=?",refreshTrigger:"=?",displayCallback:"&",disabled:"=?",markersCount:"@",markersLabelLow:"@",markersLabelHigh:"@"},template:'<div class="bar"><div class="selection"></div></div><div class="handle low"></div><div class="handle high"></div><div class="bubble limit low">{{ values.length ? values[floor || 0] : floor }}</div><div class="bubble limit high">{{ values.length ? values[ceiling || values.length - 1] : ceiling }}</div><div class="bubble value low">{{ display() }}</div><div class="bubble value high">{{ values.length ? values[local.ngModelHigh] : local.ngModelHigh }}</div><div class="markers" ng-show="{{ markersCount > 0 }}"></div>',compile:function(k,l){var m,n,o,p;return o=!l.ngModel&&l.ngModelLow&&l.ngModelHigh,n=o?"ngModelLow":"ngModel",m="ngModelHigh",p=["floor","ceiling","values",n,"refreshTrigger"],o&&p.push(m),{post:function(k,l,q){var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U;if(T=function(){var a,c,d,e;for(d=l.children(),e=[],a=0,c=d.length;a<c;a++)w=d[a],e.push(b(w));return e}(),r=T[0],G=T[1],D=T[2],x=T[3],u=T[4],A=T[5],z=T[6],B=T[7],K=b(r.children()[0]),!o){for(U=[D,z],P=0,R=U.length;P<R;P++)M=U[P],M.remove();q.highlight||K.remove()}if(q.markersCount){var V=parseInt(q.markersCount,10)+2;if(V=Math.min(V,100),V>2){for(P=0;P<V;P++)angular.element("<div></div>").addClass("marker").css("left",100*P/(V-1)+"%").appendTo(B);l.css("margin-bottom",parseInt(l.css("margin-bottom"),10)+10+"px")}q.markersLabelLow&&angular.element("<div></div>").addClass("markerLabel").css("left","0%").html(q.markersLabelLow).appendTo(B),q.markersLabelHigh&&angular.element("<div></div>").addClass("markerLabel").css("left","100%").html(q.markersLabelHigh).appendTo(B),q.markersLabelLow&&q.markersLabelHigh&&l.css("margin-bottom",parseInt(l.css("margin-bottom"),10)+20+"px")}k.display=function(){var a=k.values&&k.values.length?k.values[k.local.ngModelLow||k.local.ngModel||0]:k.local.ngModelLow||k.local.ngModel||0;return"undefined"!=typeof q.displayCallback?k.displayCallback({value:a}):a},q.disabled&&k.$watch("disabled",function(a){for(var b=0;b<T.length;b++)a?T[b].addClass("disabled"):T[b].removeClass("disabled")}),k.local={},k.local[n]=k[n],k.local[m]=k[m],t=!1,I=b(document),y=s=F=C=H=E=N=J=void 0,v=function(){var a,b,c,d;for(k.step||(k.step=1),k.floor||(k.floor=0),k.precision||(k.precision=0),o||(k.ngModelLow=k.ngModel),d=k.values,(d?d.length:void 0)&&(k.ceiling||(k.ceiling=k.values.length-1)),k.local[n]=k[n],k.local[m]=k[m],b=0,c=p.length;b<c;b++)a=p[b],"number"==typeof a&&(k[a]=i(parseFloat(k[a]),parseInt(k.precision,10),parseFloat(k.step),parseFloat(k.floor)));return y=e(G),s=g(r),F=0,C=s-g(G),H=parseFloat(k.floor),E=parseFloat(k.ceiling),N=E-H,J=C-F,B.width(r.width()-2*y),B.css("margin-left",y),J},L=function(){var a,b,p,r,w,x;return v(),b=function(a){return h((a-F)/J*100)},p=function(a){return h((a-H)/N*100)},r=function(a){return c(a*J/100)},x=function(){var a,b;switch(d(u,c(s-g(u))),b=p(k.local[n]),d(G,r(b)),d(A,c(f(G)-e(A)+y)),d(K,c(f(G)+y)),!0){case o:return a=p(k.local[m]),d(D,r(a)),d(z,c(f(D)-e(z)+y)),K.css({width:r(a-b)});case"right"===q.highlight:return K.css({width:r(110-b)});case"left"===q.highlight:return K.css({width:r(b)}),d(K,0)}},a=function(a,c,d,e){var f,g,h,j;return f=d,g=function(){return c.removeClass("active"),a.removeClass("active"),I.unbind(e.move),I.unbind(e.end),k.dragstop&&(k[m]=k.local[m],k[n]=k.local[n]),f=d,k.$apply()},h=function(a){if(!k.disabled){var c,d,e,g,h,j,p,q;if(c=a.clientX||((h=a.touches)&&(j=h[0])?j.clientX:void 0)||((p=a.originalEvent)&&(q=p.changedTouches)?q[0].clientX:void 0)||0,d=c-l[0].getBoundingClientRect().left-y,d=Math.max(Math.min(d,C),F),e=b(d),g=H+N*e/100,o)switch(f){case n:g>k.local[m]?(f=m,G.removeClass("active"),A.removeClass("active"),D.addClass("active"),z.addClass("active"),x()):k.buffer>0&&(g=Math.min(g,k.local[m]-k.buffer));break;case m:g<k.local[n]?(f=n,D.removeClass("active"),z.removeClass("active"),G.addClass("active"),A.addClass("active"),x()):k.buffer>0&&(g=Math.max(g,parseInt(k.local[n],10)+parseInt(k.buffer,10)))}return g=i(g,parseInt(k.precision,10),parseFloat(k.step),parseFloat(k.floor)),k.local[f]=g,k.dragstop||(k[f]=g),x(),k.$apply()}},j=function(b){return v(),c.addClass("active"),a.addClass("active"),x(),b.stopPropagation(),b.preventDefault(),I.bind(e.move,h),I.bind(e.end,g)},a.bind(e.start,j)},w=function(){var b,c,d,e;for(e=["touch","mouse"],c=0,d=e.length;c<d;c++)b=e[c],a(G,A,n,j[b]),a(D,z,m,j[b]);return t=!0,!0},t||w(),x()};var W,X=function(){a(L)},Y=setInterval(function(){s!==W?(L(),W=s):clearInterval(Y)},500);for(Q=0,S=p.length;Q<S;Q++)O=p[Q],k.$watch(O,X,!0);return window.addEventListener("resize",L)}}}}}]);